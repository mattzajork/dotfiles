#!/bin/bash
NC='\033[0m'
RED='\033[0;31m'
GREEN='\033[1;32m'
YELLOW='\033[1;33m'
LIGHT_BLUE='\033[1;34m'
DIR="$(pwd)"

echo -e "${GREEN}[+] subrecon starting on $1${NC}"
echo "subrecon starting on $1" | notify

subfinder_file=$(mktemp)
amass_file=$(mktemp)

subfinder -d $1 -silent -o $subfinder_file -all
amass enum -silent -passive -config /root/config.ini -d $1 -o $amass_file

combined_file=$(mktemp)

cat $amass_file $subfinder_file | sort -u > $combined_file
cat $combined_file > $DIR/$1

rm $subfinder_file
rm $amass_file
rm $combined_file

echo -e "${GREEN}[+] subrecon on $1 complete${NC}"
echo "subrecon on $1 complete" | notify
